<link rel="import" href="../bower_components/polymerfire/firebase-auth.html">

<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">

<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="shared-styles.html">

<dom-module id="my-login">
	<template>
		<style  is="custom-style" include="iron-flex iron-flex-alignment shared-styles">

		</style>

		<firebase-auth
			id="auth"
			user="{{user}}"
			status-known="{{statusKnown}}"
			provider="google">
		</firebase-auth>

		<!-- If user is not logged in, Sign in button appears -->
		<paper-button on-tap="login" hidden$="[[user]]">Sign In</paper-button>

		<!-- If user is logged in, render Firstname button -->
		<template is="dom-if" if="[[user]]">
			<paper-menu-button vertical-align="top" vericalOffset=10 horizontal-align="right">
				<paper-button slot="dropdown-trigger" alt="menu">
					[[user.displayName]]
				</paper-button>
				<paper-listbox slot="dropdown-content">
					<paper-item disabled>[[user.displayName]]</paper-item>
					<paper-item>Dashboard</paper-item>
					<paper-item>Administrator</paper-item>
					<paper-item>
						<paper-button on-tap="logout" hidden$="[[!user]]">Sign Out</paper-button>
					</paper-item>
				</paper-listbox>
			</paper-menu-button>
		</template>

	</template>
	<script>
	Polymer({
		is: 'my-login',
		properties: {
			user: {
				type: Object
			},
			statusKnown: {
				type: Object
			}
		},
		login: function() {
			return this.$.auth.signInWithPopup();
		},
		logout: function() {
			return this.$.auth.signOut();
		}
	})
	</script>
</dom-module>
